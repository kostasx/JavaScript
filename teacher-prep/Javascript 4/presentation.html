<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Javascript - Week 4</title>

  <link rel="stylesheet" href="../libs/revealjs/css/reveal.css">
  <link rel="stylesheet" href="../libs/revealjs/css/theme/night.css">

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="../libs/revealjs/lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? '../libs/revealjs/css/print/pdf.css' : '../libs/revealjs/css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>
</head>

<body>
  <div class="reveal">
    <div class="slides">

      <section>
        <h1>Week 4</h1>
        <p>
          <small>Hi, I'm
            <a href="http://tsevdos.me">John Tsevdos</a> a front-end developer from Athens, Greece.</small>
        </p>
      </section>

      <section>
        <section>
          <h2>Agenda</h2>
          <ul>
            <li>JSON and fetch</li>
            <li>Developer Tools</li>
            <li>Arrays</li>
            <li>DOM 101</li>
            <li>Events and capturing user input</li>
            <li>Order of execution</li>
          </ul>
        </section>

        <section>
          <h2>Rules</h2>
          <ul>
            <li>Please don't afraid to interrupt me or ask me at any time!</li>
            <li>Try to type as much as you can!</li>
            <li>On hands-on sections before asking:
              <ol>
                <li>Struggle a bit</li>
                <li>Then ask ;-)</li>
              </ol>
            </li>
          </ul>
        </section>
      </section>

      <section>

          <section>
            <h2>JSON and fetch</h2>
            <ul>
              <li>What is JSON</li>
              <li>How to fetch JSON data</li>
            </ul>
          </section>

          <section>
            <h2>What is JSON</h2>
            <ul>
              <li>JSON (JavaScript Object Notation) is a lightweight data-interchange format</li>
              <li>It is easy for humans to read and write</li>
              <li>It is easy for machines to parse and generate</li>
              <li>It is completely language independent</li>
            </ul>
          </section>

          <section>
            <h2>JSON allowed values</h2>
            <ul>
              <li>string</li>
              <li>number</li>
              <li>object</li>
              <li>array</li>
              <li>boolean</li>
              <li>null</li>
            </ul>
          </section>

          <section>
            <h2>An example</h2>
<pre><code>
{
  "firstname": "John",
  "lastname": "Tsevdos",
  "age": 35,
  "address": {
    "city": "Athens",
    "street": "my street",
    "number": 12
  },
  "isOlympiakos": true,
  "pet": null,
  "hobbies": [
    "football",
    "movies",
    "coding"
  ]
}
</code></pre>
          </section>

          <section>
            <h2>Convert an object to JSON (JSON.stringify)</h2>
<pre><code>
const me = {
  firstname: 'John',
  lastname: 'Tsevdos',
  age: 31,
  address: {
    city: 'Athens',
    street: 'my street',
    number: 12
  },
  isOlympiakos: true,
  pet: null,
  hobbies: [
    "football", "movies", "coding"
  ]
};
const meJSON = JSON.stringify(me);

console.log(me);
console.log(typeof me);
console.log(meJSON);
console.log(typeof meJSON);
</code></pre>
          </section>

          <section>
            <h2>Convert a JSON to object (JSON.parse)</h2>
<pre><code>
const myJSON = '{"firstname":"John", "lastname":"Tsevdos", "age":35, "address": { "city":"Athens", "street":"my street", "number":12 }, "isOlympiakos":true, "pet":null, "hobbies": ["football", "movies", "coding"]}';
const myObj = JSON.parse(myJSON);

console.log(myJSON);
console.log(typeof myJSON);
console.log(myObj);
console.log(typeof myObj);
</code></pre>
          </section>

          <section>
            <h2>fetch</h2>
            <ul>
              <li>fetch API provides a JavaScript interface for making HTTP requests</li>
              <li>fetch() method provides an easy way to fetch resources asynchronously</li>
              <li>fetch() method return a Promise</li>
            </ul>
          </section>

          <section>
            <h2>fetch example</h2>
            <p><a href="https://developers.google.com/web/updates/2015/03/introduction-to-fetch" target="_blank">Documentation</a></p>
<pre><code>
fetch('https://jsonplaceholder.typicode.com/posts')
  .then(function(response) {
    console.log(response);
    return response.json();
  })
  .then(function(data) {
    console.log(data)
  });
</code></pre>
          </section>

          <section>
            <h2>JSON and fetch hands on</h2>
            <ul>
              <li>Create a valid JSON object that describes yourself on <a href="http://myjson.com/" target="_blank">myjson.com</a></li>
              <li>Use as many JSON values as you can (strings, numbers, objects, arrays, booleans)</li>
              <li>Consume it using fetch (in codepen)</li>
            </ul>
          </section>

        </section>

      <section>

        <section>
          <h2>Developer Tools</h2>
          <ul>
            <li>Network</li>
            <li>Elements</li>
            <li>Console</li>
          </ul>
        </section>

        <section>
          <h2>Network tab</h2>
          <ul>
            <li>Open the Network tab at the
              <a href="http://socialhackersacademy.org/" target="_blank">Social Hackers Academy site</a>.</li>
            <li>Q: What this view can you tell you about this site?</li>
          </ul>
        </section>

        <section>
          <h2>Network tab hands on</h2>
          <p>Visit your favorite site and try to answer the below questions:</p>
          <ul>
            <li>What is the total size of the web site?</li>
            <li>How many requests it makes?</li>
            <li>How many of these requests are from images?</li>
            <li>How many of these requests are from AJAX (XHR)?</li>
          </ul>
        </section>

        <section>
          <h2>Elements tab</h2>
          <ul>
            <li>Open the Elements tab at the
              <a href="http://socialhackersacademy.org/" target="_blank">Social Hackers Academy site</a>.</li>
            <li>Q: What this view can you tell you about this site?</li>
          </ul>
        </section>

        <section>
          <h2>Elements tab hands on</h2>
          <p>Go to
            <a href="http://www.bbc.com" target="_blank">BBC.com</a> and do the below:</p>
          <ol>
            <li>Change the title, subtitle and the image of the main story with a title, sub-title and an image of your choice!</li>
            <li>Remove from the DOM all the sections expect from the section "Featured video" and change the backgroung of the "Featured video" to blue.</li>
          </ol>
        </section>

        <section>
          <h2>Console tab</h2>
          <ul>
            <li>Open the console tab.</li>
          </ul>
<pre><code>
console.log('hello, world!') // > hello, world!
</code></pre>
        </section>

        <section>
          <h2>Console tab hands on</h2>
          <ul>
            <li>Create a new html file (check your slack) and type the below code into a script tag:</li>
          </ul>
<pre><code>
const me = {
  firstName: 'John',
  lastName: 'Tsevdos',
  age: 35
};

console.log(me);
</code></pre>
        </section>

        <section>
          <h2>Console tab hands on</h2>
<pre><code>
function bar(){
  doSomethigWrong();
}

function foo() {
  bar();

  return "foo";
}

foo();
</code></pre>
        </section>

        <section>
            <h2>Console tab hands on</h2>
<pre><code>
function getMe() {
  return
  {
    firstName: 'John'
  };
}

const me = getMe();
// debugger;
me.lastName = "Tsevdos";
</code></pre>
          </section>

          <section>
              <h2>Console tab hands on</h2>
              <ul>
                <li>Open the console tab.</li>
              </ul>
<pre><code>
window
document
</code></pre>
            </section>

        <section>
          <h2>Console tab hands on</h2>
          <ul>
            <li>Visit your favorite site.</li>
          </ul>
<pre><code>
// Type the below command on console and explain what we just did
document.body.innerHTML = '<h1>Hello There!</h1>';
</code></pre>
        </section>

      </section>

      <section>

        <section>
          <h2>Arrays</h2>
          <ul>
            <li>Basics</li>
            <li>Iterators and functional methods</li>
          </ul>
        </section>

        <section>
          <h2>Create an array</h2>
<pre><code>
const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

console.log(months);
console.log(months.length);
</code></pre>
        </section>

        <section>
          <h2>Access an array item</h2>
<pre><code>
const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
const firstMonth = months[0];
const lastMonth = months[months.length - 1];

console.log(firstMonth);
console.log(lastMonth);
</code></pre>
        </section>

        <section>
          <h2>Add to the end of an array</h2>
<pre><code>
const fruits = ['Apple', 'Banana'];
fruits.push('Orange');

console.log(fruits);
</code></pre>
        </section>

        <section>
          <h2>Remove from the end of an array</h2>
<pre><code>
const fruits = ['Apple', 'Banana', 'Orange'];
const last = fruits.pop(); // remove Orange (from the end)

console.log(last);
console.log(fruits);
</code></pre>
        </section>

        <section>
          <h2>Remove from the front of an array</h2>
<pre><code>
const fruits = ['Apple', 'Banana', 'Orange'];
const first = fruits.shift(); // remove Apple from the front

console.log(first);
console.log(fruits);
</code></pre>
        </section>

        <section>
          <h2>Add to the front of an array</h2>
<pre><code>
const fruits = ['Apple', 'Banana', 'Orange'];
fruits.unshift('Strawberry');

console.log(fruits);
</code></pre>
        </section>

        <section>
          <h2>Find the index of an item in array</h2>
<pre><code>
const fruits = ['Apple', 'Banana', 'Orange'];
const pos1 = fruits.indexOf('Banana');
const pos2 = fruits.indexOf('John');

console.log(pos1); // 1
console.log(pos2); // -1
</code></pre>
        </section>

        <section>
          <h2>Remove items</h2>
<pre><code>
const fruits = ['Apple', 'Banana', 'Orange'];
const removedItem = fruits.splice(0, 1);

console.log(fruits);
console.log(removedItem);
</code></pre>
        </section>

        <section>
          <h2>Loop over an array</h2>
<pre><code>
const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

months.forEach(function(month, index, array) {
  console.log(index, month);
});
</code></pre>
        </section>

        <section>
          <h2>Map an array to another array</h2>
<pre><code>
const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
const monthsWithIndex =  months.map(function(month, index, array) {
  return `${index + 1} ${month}`;
});

console.log(monthsWithIndex);
</code></pre>
        </section>

        <section>
          <h2>Reduce an array</h2>
<pre><code>
const numbers = [5, 10, 15, 55];
const total = numbers.reduce(function(accumulator, currentValue){
  return accumulator + currentValue;
}, 0);

console.log(total);
</code></pre>
        </section>

        <section>
          <h2>Reduce an array</h2>
<pre><code>
const numbers = [5, 10, 15, 55];
const largestValue = numbers.reduce(function(accumulator, currentValue){
  return accumulator > currentValue ? accumulator : currentValue
});
// same as Math.max(...numbers)

console.log(largestValue);
</code></pre>
        </section>

        <section>
          <h2>Filter an array</h2>
<pre><code>
const numbers = [5, 10, 15, 55];
const numbersLargerThanTwelve = numbers.filter(function(item){
  return item > 12;
});

console.log(numbers);
console.log(numbersLargerThanTwelve);
</code></pre>
        </section>

        <section>
          <h2>Find item in array</h2>
<pre><code>
const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
const march = months.find(function(item) {
  return item === 'March';
});

console.log(march);
</code></pre>
        </section>

        <section>
          <h2>Array hands on</h2>
          <ul>
            <li>Fork this <a href="https://codepen.io/tsevdos/pen/rJyQjb" target="_blank">codepen</a> and complete the exercises</li>
          </ul>
        </section>

      </section>

      <section>

        <section>
          <h2>DOM 101</h2>
          <ul>
            <li>Querying the DOM</li>
            <li>Modifying properties, attributes and HTML classes</li>
            <li>DOM Manipulation</li>
          </ul>
        </section>

        <section>
          <h2>The DOM (Document Object Model)</h2>
          <ul>
            <li>document: the root object</li>
            <li>element: refers to an object (member of the DOM API)</li>
            <li>nodeList: A collection (array) of elements</li>
          </ul>
        </section>

        <section>
          <h2>Querying the DOM</h2>
          <ul>
            <li>
              Open your favorite web site (or
              <a href="https://v4-alpha.getbootstrap.com/examples/jumbotron/" target="_blank">click here</a>) and navigate the DOM!
            </li>
          </ul>
<pre><code>
document.getElementById('hero'); // Selects the element with the specific id
document.getElementsByTagName('p'); // Selects all ellements that matching the tag
document.getElementsByClassName('btn'); // Selects all ellements that match CSS class

document.querySelector('h1'); // Selects the first h1 element that match selector
document.querySelectorAll('h2'); // Selects all the elements that match selector
</code></pre>
        </section>

        <section>
          <h2>Meet the "family"</h2>
<pre><code>
const el = document.querySelector('.container');

el.parentNode
el.children
el.firstElementChild
el.lastElementChild
el.previousElementSibling
el.nextElementSibling
</code></pre>
        </section>

        <section>
          <h2>Modifying properties and attributes</h2>
<pre><code>
const title = document.querySelector('h1');
const img = document.querySelector('.img');

title.id = 'my-ID';
title.innerHTML = 'Hi all!';
img.setAttribute("alt", "My image");
</code></pre>
        </section>

        <section>
          <h2>Fun with innerHTML on console</h2>
          <ul>
            <li>
              Open your favorite web site console tab. Type and explain the below code snippet.
            </li>
          </ul>
<pre><code>
function makeAllLinksTextYOLO() {
  const links = document.querySelectorAll("a");
  [].forEach.call(links, (link) => link.innerHTML = "YOLO");
}

makeAllLinksTextYOLO();
</code></pre>
        </section>

        <section>
          <h2>Modifying HTML classes</h2>
<pre><code>
const el = document.querySelector('h1');

el.classList.add('my-class');
el.classList.remove('my-class');
el.classList.toggle('my-class');
</code></pre>
        </section>

        <section>
          <h2>DOM Manipulation: Create and append</h2>
          <ul>
            <li>Create a codepen (<a href="https://codepen.io/tsevdos/pen/qxVapW" target="_blank">example</a>)</li>
          </ul>
<pre><code>
const newParagraph = document.createElement('p');
newParagraph.innerHTML = "Hello world!";

document.body.appendChild(newParagraph);
</code></pre>
        </section>

        <section>
          <h2>DOM Manipulation: Create and insertBefore</h2>
<pre><code>
// ... previous code
const newTitle = document.createElement('h1');
newTitle.innerHTML = "Welcome to Social Hackers Academy!";

// parentNode.insertBefore(newNode, referenceNode);
document.body.insertBefore(newTitle, newParagraph);
</code></pre>
        </section>

        <section>
          <h2>DOM Manipulation: Remove</h2>
<pre><code>
const el = document.querySelector('h1');
el.remove();
</code></pre>
        </section>

        <section>
          <h2>DOM Manipulation hands on</h2>
          <ul>
            <li>Form this <a href="https://codepen.io/tsevdos/pen/ZrapRV" target="_blank">codepen</a></li>
            <li>Try to programmatickally (using JS) recreate this <a href="https://v4-alpha.getbootstrap.com/examples/jumbotron/" target="_blank">demo page</a></li>
          </ul>
        </section>

      </section>

      <section>

        <section>
          <h2>Events and capturing user input</h2>
          <ul>
            <li>Events are actions that happen in time</li>
            <li>They might be triggered from the user or the browser</li>
            <li>We have many <a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank">DOM events</a>
              but most of the times we use mouse and keyboard events.</li>
          </ul>
        </section>

        <section>
          <h2>Click event</h2>
          <p><a href="https://codepen.io/tsevdos/pen/MQOaYe" target="_blank">codepen</a></p>
<pre><code>
<button id="my-btn" type="button">Click me</button>
const btn = document.querySelector('#my-btn');

btn.addEventListener('click', function(event){
  console.log(event.type + ' got fired!');
});
</code></pre>
        </section>

        <section>
          <h2>Meet the event object</h2>
          <ul>
            <li>event.type</li>
            <li>event.target</li>
            <li>event.preventDefault()</li>
            <li>and a lot more depending the event type!</li>
          </ul>
        </section>

        <section>
          <h2>Click event hands on</h2>
          <ul>
            <li>Solve this <a href="https://codepen.io/tsevdos/pen/padjEb" target="_blank">exercise</a></li>
          </ul>
        </section>

        <section>
          <h2>Most used events</h2>
          <ul>
            <li>click</li>
            <li>mouseenter</li>
            <li>mouseleave</li>
            <li>mousedown</li>
            <li>mouseup</li>
            <li>mousemove</li>
            <li>keydown</li>
            <li>keyup</li>
            <li>blur</li>
            <li>focus</li>
          </ul>
        </section>

        <section>
          <h2>Keyup event</h2>
          <p><a href="https://codepen.io/tsevdos/pen/eVepyG" target="_blank">codepen</a></p>
<pre><code>
<input id="my-input" type="text">
const input = document.querySelector('#my-input');

input.addEventListener('keyup', function(event){
  console.log(event.type + event.target.value);
});
</code></pre>
        </section>

        <section>
          <h2>Keyup event hands on</h2>
          <ul>
            <li>Solve this <a href="https://codepen.io/tsevdos/pen/JpOYva" target="_blank">exercise</a></li>
          </ul>
        </section>

        <section>
          <h2>Mouseenter and mouseleave event</h2>
          <p><a href="https://codepen.io/tsevdos/pen/eVedwa" target="_blank">codepen</a></p>
<pre><code>
img.addEventListener('mouseenter', function(e){
  console.log(event.type + event.target);
});

img.addEventListener('mouseleave', function(e){
  console.log(event.type + event.target);
});
</code></pre>
        </section>

        <section>
          <h2>Mouseenter and mouseleave event hands on</h2>
          <ul>
            <li>Solve this <a href="https://codepen.io/tsevdos/pen/WMXoQa" target="_blank">exercise</a></li>
          </ul>
        </section>

        <section>
          <h2>On page load</h2>
          <p><a href="https://codepen.io/tsevdos/pen/JpObNR" target="_blank">codepen</a></p>
<pre><code>
document.addEventListener('DOMContentLoaded', function(e){
  console.log(event.type, event.target);
});
</code></pre>
        </section>

        <section>
            <h2>Simple XSS attack</h2>
            <p>Explain the below code</p>
<pre><code>
document.addEventListener('DOMContentLoaded', function(e){
  document.body.innerHTML = '';
});
</code></pre>
          </section>

      </section>

      <section>

        <section>
          <h2>Order of execution</h2>
          <ul>
            <li>Explain the below code samples</li>
          </ul>
        </section>

        <section>
          <h2>Example 1</h2>
<pre><code>
document.body.innerHTML = '';
const myDiv = document.createElement('div');
myDiv.innerHTML = 'Hello World';

document.body.append(myDiv);
</code></pre>
        </section>

        <section>
          <h2>Example 2</h2>
<pre><code>
console.log('Start');
document.body.innerHTML = '';

setTimeout(function() {
  console.log('From setTimeout');
  const myDiv = document.createElement('div');
  myDiv.innerHTML = 'Hello World';
  document.body.append(myDiv);
}, 5000);

console.log('End');
</code></pre>
        </section>

        <section>
          <h2>Example 3</h2>
<pre><code>
console.log('Start');
document.body.innerHTML = '';

fetch('https://jsonplaceholder.typicode.com/posts')
  .then((response) => response.json())
  .then((data) => {
    console.log('Got the data boss!', data);
    data.slice(0, 5).forEach((post) => {
      const {title, body} = post;
      const myDiv = document.createElement('div');
      myDiv.innerHTML = `<h2>${title}</h2><p>${body}</p>`;
      document.body.append(myDiv);
    });
  });

console.log('End');
</code></pre>
        </section>

        <section>
          <h2>Example 4</h2>
<pre><code>
console.log('Start');

setTimeout(function() {
  console.log('From setTimeout');
}, 0);

function a(x) {
  console.log('Start function a');
  b(x);
  console.log('End function a');
}

function b(x) {
  console.log('Start function b');
  console.log('Value of x: ' + x);
  console.log('End function b');
}

a(22);
console.log('End');
</code></pre>
        </section>


        <section>
          <h2>Bonus: Hoisting</h2>
<pre><code>
console.log(name);
var name = 'John';
console.log(name);
</code></pre>
        </section>

        <section>
          <h2>Bonus: Hoisting</h2>
<pre><code>
console.log(name);
const name = 'John';
console.log(name);
</code></pre>
        </section>

        <section>
          <h2>Bonus: Hoisting</h2>
<pre><code>
console.log(foo());

function foo(){
  function bar() {
      return 3;
  }
  return bar();
  function bar() {
      return 8;
  }
}
</code></pre>
        </section>

        <section>
          <h2>Bonus: Hoisting</h2>
<pre><code>
console.log(foo());

var foo = function (){
  function bar() {
      return 3;
  }
  return bar();
  function bar() {
      return 8;
  }
}
</code></pre>
        </section>

        <section>
          <h2>Bonus: Hoisting</h2>
<pre><code>
console.log(foo());

function foo() {
  var bar = function() {
    return 3;
  };
  return bar();
  var bar = function() {
    return 8;
  };
}
</code></pre>
        </section>

      </section>

      <section>

        <section>
          <h2>Next week</h2>
          <ul>
            <li>Events</li>
            <li>Callbacks</li>
            <li>XHTTP Requests</li>
            <li>API calls</li>
            <li>+ PROJECT</li>
          </ul>
        </section>

        <section>
          <h2>Questions?</h2>
        </section>

      </section>

    </div>
  </div>

  <script src="../libs/revealjs/lib/js/head.min.js"></script>
  <script src="../libs/revealjs/js/reveal.js"></script>

  <script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
      dependencies: [{
          src: '../libs/revealjs/plugin/markdown/marked.js'
        },
        {
          src: '../libs/revealjs/plugin/markdown/markdown.js'
        },
        {
          src: '../libs/revealjs/plugin/notes/notes.js',
          async: true
        },
        {
          src: '../libs/revealjs/plugin/highlight/highlight.js',
          async: true,
          callback: function () {
            hljs.initHighlightingOnLoad();
          }
        }
      ]
    });
  </script>
</body>

</html>